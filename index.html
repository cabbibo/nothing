<!--

Hi! 

If you are reading this, its most likely because you code.



-->



<html>



  <head>
    <style>
      body{ margin:0px;font-size:30px;
      font-family: "Calibre-Thin", "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Helmut, Arial, "Lucida Grande", sans-serif;
      font-weight: 300;
      font-style: normal;
      color: #ffffff; }
      

      #infoBody{
      z-index: 999;
      position: absolute;
      right: 20px;
      //width: 20px;
      background: none;
    }
      html{ overflow: hidden }
    </style>


      <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
      <meta name="twitter:card" content="photo">
      <meta name="twitter:site" content="@cabbibo">
      <meta name="twitter:creator" content="@cabbibo">
      <meta name="twitter:url" content="http://cabbi.bo/light">
      <meta name="twitter:title" content="Love is All">
      <meta name="twitter:description" content="Though it is quiet, love has more power than the darkness ever will.">
      <meta name="twitter:creator" content="@cabbibo">
      <meta name="twitter:image" content="http://cabbi.bo/light/image.png">
      <meta name="twitter:image:width" content="1440">
      <meta name="twitter:image:height" content="900">
      <meta name="twitter:domain" content="cabbi.bo">
      <meta itemprop="name" content="Cabbi.bo">
      <meta itemprop="description" content="Though it is quiet, love has more power than the darkness ever will.">
      <meta itemprop="image" src="http://cabbi.bo/light/image.png">
      <meta property="og:title" content="Though it is quiet, love has more power than the darkness ever will.">
      <meta property="og:type" content="website">
      <meta property="og:url" content="http://cabbi.bo/light">
      <meta property="og:image" content="http://cabbi.bo/light/image.png"/>
      <meta property="og:site_name" content="Cabbi.bo">
      <meta property="og:description" content="Though it is quiet, love has more power than the darkness ever will.">

  </head>

  <body>

    <script src="lib/three.min.js">             </script>
    <script src="lib/jquery.min.js">            </script>
    <script src="lib/ShaderLoader.js">          </script>

    <script src="lib/ScrollControls.js">        </script>
    <script src="lib/ObjectControls.js">        </script>


    <script src="lib/OBJLoader.js">             </script>
    
    <script src="fonts/PTMono.js">              </script>
    <script src="TextParticles.js">             </script>

  
    <script src="text/noThing.js">              </script>

    <script src="Light.js">                     </script>
    <script src="Connections.js">               </script>
    <script src="Darkness.js">                  </script>

    <script src="js/crystalGeo.js">             </script>
    <script src="js/RayGeo.js">                 </script>
    <script src="js/ConnectionGeo.js">          </script>
    <script src="js/Link.js">                   </script>
    <script src="js/DarknessGeo.js">            </script>


    <script src="js/Story.js">                  </script>


    <script src="js/AudioController.js"> </script>
    <script src="js/AudioBuffer.js"> </script>
    <script src="js/BufferedAudio.js"> </script>


    <script src="js/ParticleField.js"></script>
    <script src="js/DeathRays.js"></script>
    <script src="js/DeathBars.js"></script>

    <script src="js/MakeFunctions.js"></script>
    <script src="js/Make.js"></script>

    <script src="js/Load.js"></script>

    <script src="js/Links.js"></script>
   

    <script>

      var T = THREE;

      var SETPOS;


      var camera, renderer, scene , controls , clock;
      
      var textParticles;

      var font = PTMono( 'fonts/PTMono.png' );

      var time = { type:"f" , value: 1 }
      var shaders = new ShaderLoader( 'examples/fade/shaders' );

      var manager = new THREE.LoadingManager();


      var loader = new THREE.OBJLoader( manager );
      
      var neededToLoad = 0;
      var loaded = 0;

      var G = {}
      G.sounds = {}
      G.textures = {}
      G.models = {}

       G.uniforms = {
        
        dT:       { type:"f"  , value : 0             },
        time:     { type:"f"  , value : 0             },
        progress: { type:"f"  , value : 0             },
        iModelMat:{ type:"m4" , value: new THREE.Matrix4() },
        audio: { type:"t" , value:null},
      }

      G.audio  = new AudioController();

      G.uniforms.audio.value = G.audio.texture;

      G.audio.currentBuffer = 0;
      //G.audio.mute.gain.value = 0;

      G.audio.buffers = {};
      G.audio.playbackBuffers = [];

      G.story = new Story();


      LoadItAll();

     


      function init(){

      // Scroll Directions
       infoBody = document.createElement("div");

       infoBody.id ="infoBody";
       infoBody.innerHTML = "scroll  <br/> &#x2193; &#x2193; &#x2193;"

       document.body.appendChild( infoBody );


        var w = window.innerWidth;
        var h = window.innerHeight;

        camera = new THREE.PerspectiveCamera( 65 , w/h , .01 , 100 );
        camera.position.z = 1;

        //Setting up params for scroll controls in Make.js
        controls = new ScrollControls( camera );
        
        clock = new THREE.Clock();
        
        scene = new THREE.Scene();

      

        var dpr = window.devicePixelRatio || 1;
        renderer = new THREE.WebGLRenderer();
        renderer.setPixelRatio( dpr );
        renderer.setSize( window.innerWidth, window.innerHeight );

        document.body.appendChild( renderer.domElement );
        window.addEventListener( 'resize', onWindowResize, false );



        // Makes a buffer for playing sounds! 
        for( var i = 0; i < 20; i++ ){
          var g = G.audio.buffers.pure.buffer;
          G.audio.playbackBuffers[i] = new BufferedAudio( g , G.audio.ctx , G.audio.gain , false );
        }


        objectControls = new ObjectControls( camera );

        Make();


        

      }

      
      function animate(){

        requestAnimationFrame( animate );

        time.value += clock.getDelta();

        objectControls.update();

        if( SETPOS ){

          camera.position.y = -(camera.position.y - SETPOS) / 8 + camera.position.y;

          if( Math.abs(camera.position.y - SETPOS) < .01 ){

            SETPOS = undefined;
          }

          
        }else{
          controls.update();
        }
        G.story.update( controls.position , controls.oldPosition );

        
        renderer.render( scene , camera );

        infoBody.style.top = 20 * camera.position.y + "px";


      }


      function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

			}

      G.audio.play = function( buffer , rate ){

        G.audio.currentBuffer += 1;
        G.audio.currentBuffer %= G.audio.playbackBuffers.length;
        G.audio.playbackBuffers[G.audio.currentBuffer].play(buffer,rate);

      }

      function SP ( pos ){
        SETPOS = pos;
      }




    </script>

  </body>
</html>
